<!doctype html>
<html ng-app="statistika">
  <head>
    <link rel="stylesheet" href="components/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="components/bootstrap/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="statistika.css">
    <script src="components/jquery/jquery-1.9.1.min.js"></script>
    <script src="components/angular/angular.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
    <script src="components/angular-ui/sortable.js"></script>
    <script src="components/angular-ui/if.js"></script>
    <script src="components/persist-min.js"></script>
    <script src="components/underscore-min.js"></script>
    <script src="statistika.js"></script>
  </head>
  <body ng-controller="MainCtrl">
    <div id="reset-persisted-data">
      <button ng-click="reset()">vymazat data</button>
    </div>

    <section ng-controller="VariablesCtrl">
      <h1>Formulace statistického šetření</h1>
      <h2>Statistické znaky</h2>

      <fieldset ng-repeat="variable in header.variables">
        <h3 class="variable"><input type="text" ng-model="variable.name" ng-required="true"></h3>
        <label>
          <textarea ng-model="variable.description"
                    placeholder="Description of your variable"></textarea>
        </label>
        <label>
          <select ng-model="variable.scale" ng-options="scale.key as scale.description for scale in scales">
            <option value=""></option>
          </select>
        </label>
      </div>
    </section>

    <h1>Data</h1>
    <div ng-controller="DataCtrl">
      <table>
        <thead>
          <tr>
            <td/>
              <td ng-click="orderBy(variable)" ng-repeat="variable in header.variables" class="sortable" ng-class="variable.order">
              {{ variable.name }}
            </td>
            <td>
              <button ng-click="addRow()" title="add row">&plus; řádek</button>
            </td>
          </tr>
        </thead>

        <tfoot>
          <tr>
            <td/>
            <td ng-repeat="column in header.columns">{{column.value}}</td>
          </tr>
        </tfoot>

        <tbody ui-sortable="sortableOptions">
          <tr ng-repeat="row in rows">
            <td class="handle">
              {{ $index + 1 }}.
            </td>
            <td ng-repeat="column in row.columns">
              <input type="text" ng-model="column.value">
            </td>
            <td>
              <button ng-click="removeRow(row)" title="remove row" tabindex="-1">&minus;</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
